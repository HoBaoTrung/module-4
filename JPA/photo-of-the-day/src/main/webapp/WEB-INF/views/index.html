<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Bá»©c áº£nh cá»§a ngÃ y - NASA</title>
</head>
<body>
<h2>Bá»©c áº£nh cá»§a ngÃ y tá»« NASA</h2>
<img id="img-of-the-day" width="600">

<h3>ÄÃ¡nh giÃ¡ áº£nh</h3>
<form th:action="@{/home/feedback}" method="post" th:object="${feedback}">
  TÃªn báº¡n: <input type="text" th:field="*{author}" required><br>
  Nháº­n xÃ©t: <textarea th:field="*{comment}" required></textarea><br>
  Äiá»ƒm (1-5): <input type="number" th:field="*{rating}" min="1" max="5" required><br>
  <button type="submit">Gá»­i Ä‘Ã¡nh giÃ¡</button>
</form>

<h3>Pháº£n há»“i hÃ´m nay</h3>
<ul>
  <li th:each="fb : ${feedbackList}">
    <b th:text="${fb.author}">TÃªn</b> -
<!--    <i th:text="'â˜…'.repeat(fb.rating)"></i><br>-->

    <span th:each="i : ${#numbers.sequence(1, fb.rating)}">â˜…</span><br>

    <span th:text="${fb.comment}">Ná»™i dung</span><br>
    <a th:href="@{'home/like/' + ${fb.id}}">ğŸ‘ Like (<span th:text="${fb.likes}">0</span>)</a>
    <hr>
  </li>
</ul>

<script>
  let query = 'https://api.nasa.gov/planetary/apod?api_key=DfSYGubwqxIBmMagdvxRjHFNfhqZgi9878GcjDCR';
  let request = new XMLHttpRequest();
  request.open('GET', query);
  request.onload = function () {
    if (request.status === 200) {
      let response = JSON.parse(request.responseText);
      document.getElementById('img-of-the-day').setAttribute('src', response.url);
    }
  };
  request.send();
</script>
</body>
</html>
